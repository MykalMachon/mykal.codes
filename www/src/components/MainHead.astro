---
export interface Props {
  title: string;
  description: string;
}

const { title, description } = Astro.props;
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{title} | mykal.codes</title>
<meta name="description" content={description} />
<link rel="icon" type="image/png" href="/favicon.png" />
<link rel="canonical" href={canonicalURL} />
<!-- Google fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Source+Sans+Pro:wght@400;700&display=swap"
  rel="stylesheet"
/>

<!-- Plausible Analytics Test --> 
<script defer data-domain="mykal.codes" src="https://plausible-analytics-production-0bfc.up.railway.app/js/script.js"></script>

<!-- Styles -->
<link rel="stylesheet" href="/style/global.css" />
<link
  rel="alternate"
  type="application/rss+xml"
  title="The main RSS feed for mykal.codes"
  href="/feeds/main.xml"
/>

<!-- Mastodon verification -->
<link rel="me" href="https://indieweb.social/@mykalmachon" />

<!-- UMAMI Analytics -->
{
  import.meta.env.MODE === 'production' && (
    <script
      async
      defer
      src="https://stats.tbx.sh/script.js"
      data-website-id="9cc92a59-874f-425f-8dc3-ec11fa52a542"
    />
  )
}

<!-- Web Mentions -->
<link rel="webmention" href="https://webmention.io/mykal.codes/webmention" />
<link rel="pingback" href="https://webmention.io/mykal.codes/xmlrpc" />

<!-- lazy loading -->
<script>
  // image dynamic loading
  const loadingImages = document.querySelectorAll('img.loading');
  loadingImages.forEach((loadingImageEl) => {
    // @ts-ignore
    const hqImageUrl = loadingImageEl.dataset.lazy;
    // @ts-ignore
    if (hqImageUrl) loadingImageEl.src = hqImageUrl;
    loadingImageEl.addEventListener('load', () => {
      loadingImageEl.classList.remove('loading');
    });
  });
</script>
